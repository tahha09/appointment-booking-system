<header class="medical-header">
  <div class="main-bar  ">
    <div class="container main-bar__content ">
      <div class="brand">
        <div class="brand__logo" aria-hidden="true">
          <img src="assets/logo.png" alt="Medical Care Logo" />
        </div>
        <div class="brand__text">
          <span class="brand__name">Medical Care</span>
        </div>
      </div>

      <button
        class="menu-toggle"
        type="button"
        aria-label="Toggle navigation"
        [attr.aria-expanded]="menuOpen()"
        (click)="toggleMenu()"
      >
        <span class="menu-toggle__bars" aria-hidden="true"></span>
      </button>

      <div class="nav-wrap" [class.is-open]="menuOpen()">
        <nav class="nav">
          <a
            routerLink="/"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            Home
          </a>
          <a routerLink="/services" routerLinkActive="active">Services</a>
          <a routerLink="/doctors" routerLinkActive="active">Doctors</a>
          <a routerLink="/specialties" routerLinkActive="active">Specialties</a>
          <a routerLink="/about-us" routerLinkActive="active">About Us</a>
          <a routerLink="/contact" routerLinkActive="active">Contact</a>
        </nav>

        <div class="actions">

          <ng-container *ngIf="isLoggedIn(); else guestActions">
            <div class="user-menu">
              <button
                type="button"
                class="user-menu__trigger"
                (click)="toggleUserMenu()"
                aria-haspopup="true"
                [attr.aria-expanded]="userMenuOpen()"
              >
                <span class="user-menu__avatar">
                  <img [src]="avatarUrl" alt="User avatar" />
                </span>
                <span class="user-menu__chevron" aria-hidden="true">
                  <svg viewBox="0 0 24 24">
                    <path d="M7 10l5 5 5-5H7z" />
                  </svg>
                </span>
              </button>
              <div class="user-menu__dropdown" *ngIf="userMenuOpen()">
                <button
                  type="button"
                  class="user-menu__item"
                  *ngIf="isPatient()"
                  (click)="goToProfile()"
                >
                  <span class="user-menu__icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path
                        d="M12 3a4 4 0 1 1-4 4 4 4 0 0 1 4-4Zm0 8c-3.87 0-7 2-7 4.5V18a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5C19 13 15.87 11 12 11Z"
                      />
                    </svg>
                  </span>
                  <span class="user-menu__label">Profile</span>
                </button>
                <button type="button" class="user-menu__item" (click)="goToDashboard()">
                  <span class="user-menu__icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path
                        d="M4 4h7v7H4V4Zm9 0h7v5h-7V4ZM4 13h7v7H4v-7Zm9-3h7v10h-7V10Z"
                      />
                    </svg>
                  </span>
                  <span class="user-menu__label">Dashboard</span>
                </button>
                <button type="button" class="user-menu__item user-menu__item--danger" (click)="logout()">
                  <span class="user-menu__icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path
                        d="M10 5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h6V6h-6v2a1 1 0 0 1-2 0V5Zm-1.71 6.29a1 1 0 0 0 0 1.42l2.3 2.29a1 1 0 1 0 1.42-1.42L11.41 13H4a1 1 0 0 1 0-2h7.41l-1.4-1.29a1 1 0 0 0-1.42 0Z"
                      />
                    </svg>
                  </span>
                  <span class="user-menu__label">Logout</span>
                </button>
              </div>
            </div>
          </ng-container>

          <ng-template #guestActions>
            <div class="auth-toggle">
              <a routerLink="/login" class="auth-toggle__btn auth-toggle__btn--login">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path
                    d="M7 10V8a5 5 0 0 1 10 0v2h1a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h1Zm2-2a3 3 0 0 1 6 0v2H9V8Zm3 4a1.75 1.75 0 0 1 .75 3.34V18a.75.75 0 0 1-1.5 0v-2.66A1.75 1.75 0 0 1 12 12Z"
                  />
                </svg>
                <span>Login</span>
              </a>

              <a routerLink="/register" class="auth-toggle__btn auth-toggle__btn--register">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path
                    d="M12 3a4 4 0 1 1-4 4 4 4 0 0 1 4-4Zm0 8c-3.87 0-7 2-7 4.5V18a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5C19 13 15.87 11 12 11Z"
                  />
                </svg>
                <span>Register</span>
              </a>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</header>
