<div class="space-y-6 text-[#032f30]">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
    <h2 class="text-2xl font-bold text-[#031716]">Today's Overview</h2>
    <p class="text-sm text-[#274d60]">Patients per month (last 6 months)</p>
  </div>

  <div class="rounded-2xl border border-[#d3e6eb] bg-white p-5 shadow-lg space-y-4">
    <ng-container *ngIf="loading; else loadedState">
      <p class="text-sm text-[#274d60]">Loading patient counts...</p>
    </ng-container>

    <ng-template #loadedState>
      <div class="space-y-4">
        <div *ngIf="error" class="rounded-lg bg-yellow-100 border border-yellow-300 text-[#031716] p-3 mb-4">
          <p class="text-sm">
            <span class="font-semibold">Warning:</span> {{ error }}
          </p>
        </div>

        <div class="flex items-end justify-center gap-2 sm:gap-3 md:gap-4 lg:gap-6 min-h-[220px] px-2">
          <div
            *ngFor="let item of patientCounts; trackBy: trackByMonth"
            class="flex-1 flex flex-col items-center gap-2 max-w-[80px]"
          >
            <div class="relative w-full flex items-end justify-center" style="height: 180px;">
              <div
                class="w-full rounded-t-xl bg-gradient-to-t from-[#031716] via-[#0a7075] to-[#0c969c] shadow-md transition-all duration-300 hover:shadow-lg hover:shadow-[#0c969c]/50"
                [style.height]="getBarHeight(item.value)"
                [class.opacity-50]="item.value === 0"
                [title]="item.label + ': ' + item.value + ' patients'"
              >
                <!-- <div
                  *ngIf="item.value > 0"
                  class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-semibold text-white bg-[#0c969c] px-2 py-1 rounded shadow-lg whitespace-nowrap"
                >
                  {{ item.value }}
                </div> -->
              </div>
            </div>
            <div class="text-center text-xs text-[#274d60] leading-tight w-full">
              <div class="font-semibold text-[#0a7075] mb-1">{{ item.value }}</div>
              <div class="text-[10px] sm:text-xs break-words text-[#032f30]">{{ item.label }}</div>
            </div>
          </div>
        </div>
        <div class="text-xs text-[#6ba3be] text-center pt-2">
          Data reflects distinct patients per month over the last 6 months.
        </div>
      </div>
    </ng-template>
  </div>
</div>
